name: 📝 Spelling Check

on: [push, pull_request]

jobs:
  spell-check:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up R
        uses: r-lib/actions/setup-r@v2

      - name: Install system dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y libcurl4-openssl-dev

      - name: Install R packages
        run: |
          install.packages('devtools')
          devtools::install_github('ropensci/spelling')
        shell: Rscript {0}

      - name: Run spelling check
        run: |
          Rscript -e "
            library(spelling);
            spelling_errors <- spell_check_package();
            if (length(spelling_errors) > 0) {
              print(spelling_errors);
              quit(status = 1)
            } else {
              cat('No spelling errors found.\n')
            }
          "
