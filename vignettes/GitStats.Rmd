---
title: "Introduction to GitStats"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to GitStats}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 7,
  fig.height = 4.5,
  fig.align = "center"
)
```

The purpose of this package is to gather statistics on the developers' activity from multiple git platforms, e.g. GitHub public, GitHub enterprise and GitLab. 

You can look through these platforms to search for activity by:

- your team,

- a keyword,

- owner/group of repositories.

# Getting started

You can start by creating your `GitStats` object, where you will hold information on your multiple connections.

```{r}
library(GitStats)
library(magrittr)

git_stats <- create_gitstats() %>%
  set_connection(
    api_url = "https://api.github.com",
    token = Sys.getenv("GITHUB_PAT"),
    orgs = c("r-world-devs", "openpharma", "pharmaverse")
  ) %>%
  set_connection(
    api_url = "https://gitlab.com/api/v4",
    token = Sys.getenv("GITLAB_PAT"),
    orgs = c("mbtests", "erasmusmc-public-health")
  ) 
```

# Setup preferences

You can setup your search preferences, either to organizations, team or phrase. 

## Team

If you setup your preferences to team, name it, add your team members:

```{r}
setup_preferences(git_stats,
                  search_param = "team",
                  team_name = "RWD")

# set your team members
git_stats %>%
  add_team_member("Adam Foryś", "galachad") %>%
  add_team_member("Kamil Wais", "kalimu") %>%
  add_team_member("Krystian Igras", "krystian8207") %>%
  add_team_member("Karolina Marcinkowska", "marcinkowskak") %>%
  add_team_member("Kamil Koziej", "Cotau") %>%
  add_team_member("Maciej Banaś", "maciekbanas")

# check your settings
git_stats

# now pull repos by default by team
get_repos(git_stats)

```

## Keyword

With `GitStats` you can look for the activity connected to a certain phrase.

```{r}
setup_preferences(git_stats,
                  search_param = "phrase",
                  phrase = "covid")

# now pull repos by default by phrase
get_repos(git_stats)

```
