---
title: "Get commits stats"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Get commits stats}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 7,
  fig.height = 4
)
```

When pulling commits you can choose to scan only specific repositories (not whole organizations). If that is your wish, pass your repositories (full names, i.e. `org/repository` path) to the `repos` parameter instead of `orgs` parameter.

> Example workflow makes use of public GitLab, but is rather more plausible, that you will use your internal git platforms, where you need to define `host` parameter.

```{r}
library(GitStats)

git_stats <- create_gitstats() %>%
  set_github_host(
    repos = c("r-world-devs/GitStats", "r-world-devs/shinyCohortBuilder", "openpharma/DataFakeR"),
    token = Sys.getenv("GITHUB_PAT")
  ) %>%
  set_gitlab_host(
    repos = c("mbtests/gitstatstesting"),
    token = Sys.getenv("GITLAB_PAT_PUBLIC")
  )
```

## Commits workflow

It is basically very similar to the repositories one, but you should specify additionally at least `since` parameter.

```{r, message = FALSE}
commits <- get_commits(
  gitstats_obj = git_stats,
  since = "2022-01-01",
  until = "2023-08-31"
)

get_commits_stats(git_stats)
```

You can pull stats by `week` or `day`.

```{r}
get_commits_stats(
  gitstats_obj = git_stats,
  time_interval = "week"
)
```

You can also retrieve just the pulled output.

```{r}
commits <- show_data(git_stats, "commits")
head(commits)
```

You can pull commits also by `org` or `team`. You can not pull commits by `phrase` found in code blobs.
