---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-"
)
```

# GitStats <img src="man/figures/GitStats_logo.png" align="right" height="138" style="float:right; height:138px;"/>

<!-- badges: start -->
[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![R-CMD-check](https://github.com/r-world-devs/GitStats/workflows/R-CMD-check/badge.svg)](https://github.com/r-world-devs/GitStats/actions)
[![Codecov test coverage](https://codecov.io/gh/r-world-devs/GitStats/branch/devel/graph/badge.svg)](https://app.codecov.io/gh/r-world-devs/GitStats?branch=devel)
<!-- badges: end -->

The goal of GitStats is to search through multiple GitHub and GitLab platforms for different statistics either by owners/groups of repositories, team members or searched code phrases.

For the time being GitStats supports connections to public GitHub, enterprise GitHub and GitLab.

## Installation

```r
devtools::install_github("r-world-devs/GitStats")
```

## Getting started

Please remember to have your access tokens stored as environment variables: `GITHUB_PAT` for access to GitHub API and `GITLAB_PAT` for GitLab API.

You can start by creating your `GitStats` object, where you will hold information on your multiple connections.

```{r}
library(GitStats)

git_stats <- create_gitstats() %>%
  set_host(
    api_url = "https://api.github.com",
    orgs = c("r-world-devs", "openpharma")
  ) %>%
  set_host(
    api_url = "https://gitlab.com/api/v4",
    orgs = c("mbtests")
  )
```

## Setup

You can setup your search preferences, either to `org`, `team` or `phrase`. 

### Team

If you with to setup your search parameter to team, add your team members first:

```{r}
git_stats %>%
  set_team_member("Kamil Wais", "kalimu") %>%
  set_team_member("Krystian Igras", "krystian8207") %>%
  set_team_member("Karolina Marcinkowska", "marcinkowskak") %>%
  set_team_member("Kamil Koziej", "Cotau") %>%
  set_team_member("Maciej Banaś", "maciekbanas")

setup(git_stats,
  search_param = "team",
  team_name = "RWD"
)

# now pull repos and commits by default by team
get_repos(git_stats)

pull_commits(git_stats,
  date_from = "2023-01-01",
  date_until = "2023-03-31"
)
```

### Keyword

With `GitStats` you can look for the repos with a certain phrase in code blobs.

```{r}
setup(git_stats,
  search_param = "phrase",
  phrase = "shiny"
)

# now pull repos by default by phrase
get_repos(git_stats)
```

### Acknowledgement

Special thanks to:

- Kamil Koziej @Cotau - for reviewing permanently my pull requests and suggesting more efficient solutions,
- Karolina Marcinkowska @marcinkowskak - for substantial improvements on plots,
- Matt Secrest @mattsecrest - for making use of your scripts to apply search feature,
- Kamil Wais @kalimu, Krystian Igraś @krystian8207, Adam Foryś @galachad - for your guidelines at the very beginning of the project.

